<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Your Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Hi {{ userProfile?.name || 'User' }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- User Profile Card -->
  <ion-card>
    <div class="profile-header">
      <ion-avatar class="profile-avatar">
        @if (user?.photoURL) {
          <img [src]="user?.photoURL" alt="Profile Picture">
        } @else {
          <img src="../../assets/icon/user.png" alt="Default Profile">
        }
      </ion-avatar>
      <h2 class="user-name">{{ userProfile?.name || user?.displayName || 'Cheese Lover' }}</h2>
      <p class="user-email">{{ user?.email }}</p>
    </div>

    <ion-card-content>
      <!-- User Details -->
      @if (loading) {
        <div class="loading-container">
          <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
          <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
          <ion-skeleton-text animated style="width: 70%"></ion-skeleton-text>
        </div>
      } @else {
        <ion-list>
          @if (userProfile?.birthDate) {
            <ion-item>
              <ion-icon name="calendarOutline" slot="start"></ion-icon>
              <ion-label>Birth Date</ion-label>
              <ion-chip outline>{{ userProfile?.birthDate | date:'mediumDate' }}</ion-chip>
            </ion-item>
          }
          
          @if (userProfile?.country) {
            <ion-item>
              <ion-icon name="locationOutline" slot="start"></ion-icon>
              <ion-label>Location</ion-label>
              <ion-chip outline>
                {{ userProfile?.city }}{{ userProfile?.city && userProfile?.province ? ', ' : '' }}
                {{ userProfile?.province }}{{ (userProfile?.city || userProfile?.province) && userProfile?.country ? ', ' : '' }}
                {{ userProfile?.country }}
              </ion-chip>
            </ion-item>
          }
        </ion-list>
      }
    </ion-card-content>
  </ion-card>

  <!-- Actions -->
  <div class="menu-profile">
    <ion-button expand="block">
      <ion-icon slot="start" name="personOutline"></ion-icon>
      Edit Profile
    </ion-button>
    <ion-button expand="block">
      <ion-icon slot="start" name="people-outline"></ion-icon>
      Followers / Following
    </ion-button>
    <ion-button expand="block" routerLink="/my-cheeses">
      <ion-icon slot="start" name="restaurant-outline"></ion-icon>
      My Cheeses
    </ion-button>
    <ion-button color="danger" (click)="logout()" expand="block">
      <ion-icon slot="start" name="logOutOutline"></ion-icon>
      Logout
    </ion-button>
  </div>
</ion-content>

<app-menu></app-menu>
