<article>
  @if (isLoading) {
  <div class="flex justify-center items-center h-32">
    <ion-spinner name="circular"></ion-spinner>
  </div>
  } @else if (photo1 != '') {
  <!-- <app-cheese-detail-images [cheeseId]="item._id"></app-cheese-detail-images> -->

  } @else {
  <img
    src="../../../assets/img/my-cheese-default.jpg"
    alt="{{ item.name }}"
    class="w-full h-20 object-cover rounded-lg"
  />
  }
  <div
    class="w-full flex items-center justify-end bg-stone-200 px-2 rounded-lg"
  >
    <div class="flex items-center justify-between w-full">
      <ion-item>
        <ion-datetime-button datetime="datetime"></ion-datetime-button>
        <ion-modal [keepContentsMounted]="true">
          <ng-template>
            <ion-datetime
              id="datetime"
              [value]="item.date"
              (ionChange)="updateDate($event.detail.value?.toString() ?? '')"
              presentation="date"
              [formatOptions]="{
                date: { day: '2-digit', month: 'long', year: '2-digit' }
              }"
            >
            </ion-datetime>
          </ng-template>
        </ion-modal>
      </ion-item>
      <ion-button
        fill="clear"
        color="transparent"
        (click)="statusModalOpen = true"
      >
        <app-ico-cheese-status [status]="item.status"></app-ico-cheese-status>
      </ion-button>
    </div>
    <!-- Modal for status selection -->
    <ion-modal
      [isOpen]="statusModalOpen"
      (didDismiss)="statusModalOpen = false"
      initialBreakpoint="0.3"
    >
      <ng-template>
        <ion-list>
          <ion-item button (click)="setStatus('Todo')">Todo</ion-item>
          <ion-item button (click)="setStatus('Doing')">Doing</ion-item>
          <ion-item button (click)="setStatus('Done')">Done</ion-item>
        </ion-list>
      </ng-template>
    </ion-modal>
  </div>
  <div class="w-full flex justify-between gap-2 ion-padding">
    <div class="bg-stone-200 w-[30%] p-4 rounded-lg"><strong>Liters</strong><br /><hr>{{ item.milkQuantity }} l.</div>
    <div class="bg-stone-200 w-[25%] p-4 rounded-lg">
      <strong>Milk</strong><br /><hr><app-ico-milk-type [tipus]="item.milkType"></app-ico-milk-type>
    </div>
    <div class="bg-stone-200 w-[45%] p-4 rounded-lg"><strong>Origin</strong> <br /><hr>{{ item.milkOrigin }}</div>
  </div>

  <div (click)="descriptionModalOpen = true" class="flex-col cursor-pointer bg-amber-100 p-4 rounded-lg">
    <p class="text-gray-600 p-0 m-0 text-center">" {{ item.description }} "</p>
  </div>
  <ion-modal
    [isOpen]="descriptionModalOpen"
    (didDismiss)="descriptionModalOpen = false"
    initialBreakpoint="0.5"
  >
    <ng-template>
      <ion-list>
        <ion-item>
          <div class="w-full min-h-48 mt-6">
            <ion-textarea
              #descArea
              [value]="item.description"
              placeholder="Enter your description"
              auto-grow="true"
            ></ion-textarea>
          </div>
        </ion-item>
        <ion-button
          expand="block"
          (click)="saveDescription(descArea.value ?? '')"
          >Save</ion-button
        >
      </ion-list>
    </ng-template>
  </ion-modal>
</article>
